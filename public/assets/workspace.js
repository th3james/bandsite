(function(b){var a;b.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required],textarea[name][required]",fileInputSelector:"input:file",CSRFProtection:function(d){var c=b('meta[name="csrf-token"]').attr("content");if(c){d.setRequestHeader("X-CSRF-Token",c)}},fire:function(f,c,e){var d=b.Event(c);f.trigger(d,e);return d.result!==false},confirm:function(c){return confirm(c)},ajax:function(c){return b.ajax(c)},handleRemote:function(f){var h,d,g,c=f.data("type")||(b.ajaxSettings&&b.ajaxSettings.dataType);if(a.fire(f,"ajax:before")){if(f.is("form")){h=f.attr("method");d=f.attr("action");g=f.serializeArray();var e=f.data("ujs:submit-button");if(e){g.push(e);f.data("ujs:submit-button",null)}}else{h=f.data("method");d=f.attr("href");g=null}a.ajax({url:d,type:h||"GET",data:g,dataType:c,beforeSend:function(j,i){if(i.dataType===undefined){j.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script)}return a.fire(f,"ajax:beforeSend",[j,i])},success:function(j,i,k){f.trigger("ajax:success",[j,i,k])},complete:function(j,i){f.trigger("ajax:complete",[j,i])},error:function(k,i,j){f.trigger("ajax:error",[k,i,j])}})}},handleMethod:function(g){var d=g.attr("href"),i=g.data("method"),e=b("meta[name=csrf-token]").attr("content"),h=b("meta[name=csrf-param]").attr("content"),f=b('<form method="post" action="'+d+'"></form>'),c='<input name="_method" value="'+i+'" type="hidden" />';if(h!==undefined&&e!==undefined){c+='<input name="'+h+'" value="'+e+'" type="hidden" />'}f.hide().append(c).appendTo("body");f.submit()},disableFormElements:function(c){c.find(a.disableSelector).each(function(){var d=b(this),e=d.is("button")?"html":"val";d.data("ujs:enable-with",d[e]());d[e](d.data("disable-with"));d.attr("disabled","disabled")})},enableFormElements:function(c){c.find(a.enableSelector).each(function(){var d=b(this),e=d.is("button")?"html":"val";if(d.data("ujs:enable-with")){d[e](d.data("ujs:enable-with"))}d.removeAttr("disabled")})},allowAction:function(c){var d=c.data("confirm"),e=false,f;if(!d){return true}if(a.fire(c,"confirm")){e=a.confirm(d);f=a.fire(c,"confirm:complete",[e])}return e&&f},blankInputs:function(h,e,g){var d=b(),f,c=e||"input,textarea";h.find(c).each(function(){f=b(this);if(g?f.val():!f.val()){d=d.add(f)}});return d.length?d:false},nonBlankInputs:function(d,c){return a.blankInputs(d,c,true)},stopEverything:function(c){c.stopImmediatePropagation();return false},callFormSubmitBindings:function(d){var c=d.data("events"),e=true;if(c!==undefined&&c.submit!==undefined){b.each(c.submit,function(f,g){if(typeof g.handler==="function"){return e=g.handler(g.data)}})}return e}};if("ajaxPrefilter" in b){b.ajaxPrefilter(function(c,e,d){a.CSRFProtection(d)})}else{b(document).ajaxSend(function(c,d){a.CSRFProtection(d)})}b(a.linkClickSelector).live("click.rails",function(d){var c=b(this);if(!a.allowAction(c)){return a.stopEverything(d)}if(c.data("remote")!==undefined){a.handleRemote(c);return false}else{if(c.data("method")){a.handleMethod(c);return false}}});b(a.formSubmitSelector).live("submit.rails",function(h){var f=b(this),g=f.data("remote")!==undefined,d=a.blankInputs(f,a.requiredInputSelector),c=a.nonBlankInputs(f,a.fileInputSelector);if(!a.allowAction(f)){return a.stopEverything(h)}if(d&&a.fire(f,"ajax:aborted:required",[d])){return !g}if(g){if(c){return a.fire(f,"ajax:aborted:file",[c])}if(!b.support.submitBubbles&&a.callFormSubmitBindings(f)===false){return a.stopEverything(h)}a.handleRemote(f);return false}else{setTimeout(function(){a.disableFormElements(f)},13)}});b(a.formInputClickSelector).live("click.rails",function(e){var d=b(this);if(!a.allowAction(d)){return a.stopEverything(e)}var c=d.attr("name"),f=c?{name:c,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)});b(a.formSubmitSelector).live("ajax:beforeSend.rails",function(c){if(this==c.target){a.disableFormElements(b(this))}});b(a.formSubmitSelector).live("ajax:complete.rails",function(c){if(this==c.target){a.enableFormElements(b(this))}})})(jQuery);(function(c){c.fn.pjax=function(d,e){if(e){e.container=d}else{e=c.isPlainObject(d)?d:{container:d}}return this.live("click",function(f){if(f.which>1||f.metaKey){return true}var g={url:this.href,container:c(this).attr("data-pjax"),clickedElement:c(this)};c.pjax(c.extend({},g,e));f.preventDefault()})};c.pjax=function(d){var h=c(d.container),g=d.success||c.noop;delete d.success;var e={timeout:650,push:true,replace:false,data:{_pjax:true},type:"GET",dataType:"html",beforeSend:function(i){h.trigger("start.pjax");i.setRequestHeader("X-PJAX","true")},error:function(){window.location=d.url},complete:function(){h.trigger("end.pjax")},success:function(l){if(!c.trim(l)||/<html/i.test(l)){return window.location=d.url}h.html(l);var i=document.title,m=c.trim(h.find("title").remove().text());if(m){document.title=m}var k={pjax:d.container,timeout:d.timeout};if(c.isPlainObject(k.pjax)){k.pjax=k.pjax.selector}var j=c.param(d.data);if(j!="_pjax=true"){k.url=d.url+(/\?/.test(d.url)?"&":"?")+j}if(d.replace){window.history.replaceState(k,document.title,d.url)}else{if(d.push){if(!c.pjax.active){window.history.replaceState(c.extend({},k,{url:null}),i);c.pjax.active=true}window.history.pushState(k,document.title,d.url)}}if((d.replace||d.push)&&window._gaq){_gaq.push(["_trackPageview"])}g.apply(this,arguments)}};d=c.extend(true,{},e,d);if(c.isFunction(d.url)){d.url=d.url()}var f=c.pjax.xhr;if(f&&f.readyState<4){f.onreadystatechange=c.noop;f.abort()}c.pjax.xhr=c.ajax(d);c(document).trigger("pjax",c.pjax.xhr,d);return c.pjax.xhr};var b=("state" in window.history),a=location.href;c(window).bind("popstate",function(e){var d=!b&&location.href==a;b=true;if(d){return}var f=e.state;if(f&&f.pjax){var g=c(f.pjax+"");if(g.length){c.pjax({url:f.url||location.href,container:g,push:false,timeout:f.timeout})}else{window.location=location.href}}});if(c.inArray("state",c.event.props)<0){c.event.props.push("state")}if(!window.history||!window.history.pushState){c.pjax=c.noop;c.fn.pjax=function(){return this}}})(jQuery);$(function(){$("ul.menu a").pjax("#main")});